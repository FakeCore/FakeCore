---
layout: post
title: mysql数据库事务详解
date: 2022-09-21 16:00:00 +0800
last_modified_at: 2022-11-09 16:40:22 +0800
tags: [tech, mysql]
author: fakecore
author_url: https://fakecore
---

今天就来介绍下mysql的事务相关知识

名词介绍

| 事务等级                          | 脏读                                                         | 不可重复读                                                   | 幻读 |      | 备注 |
| :-------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ---- | ---- | ---- |
| Read uncommitted                  | ✔︎                                                            | ✔                                                            | ✔    |      |      |
| Read commited                     | ✗                                                            | ✔                                                            | ✔    |      |      |
| Repeatable read                   | ✗                                                            | ✗                                                            | ✔    |      |      |
| Serializable                      | ✗                                                            | ✗                                                            | ✗    |      |      |
|                                   |                                                              |                                                              |      |      |      |
| for update                        | 对于搜索遇到的索引记录,锁定这行以及任何相关联的索引入口,这与`update`语句功能相似.其他事物如果在更新或者执行`select ... for share`,又或者是基于确定的事务隔离等级去读取数据,这些操作都会被堵塞.一致读取忽略读取视图中存在的记录上设置的任何锁 | For index records the search encounters, locks the rows and any associated index entries, the same as if you issued an `UPDATE` statement for those rows. Other transactions are blocked from updating those rows, from doing `SELECT ... FOR SHARE`, or from reading the data in certain transaction isolation levels. Consistent reads ignore any locks set on the records that exist in the read view. (Old versions of a record cannot be locked; they are reconstructed by applying [undo logs](https://dev.mysql.com/doc/refman/8.0/en/glossary.html#glos_undo_log) on an in-memory copy of the record.) |      |      |      |
| LOCK IN SHARE MODE/FOR SHARE(8.0) | 在被读取的任意行上设置share mode 锁.其他会话可以读取这些行,如果要修改必须等到会话提交.如果这些行被其他事务修改但是还没提交话,你的请求等待到事务结束,并且使用最新值 | Sets a shared mode lock on any rows that are read. Other sessions can read the rows, but cannot modify them until your transaction commits. If any of these rows were changed by another transaction that has not yet committed, your query waits until that transaction ends and then uses the latest values. |      |      |      |
|                                   |                                                              |                                                              |      |      |      |
|                                   |                                                              |                                                              |      |      |      |







